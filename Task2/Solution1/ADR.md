# Solution 1

## Автор: Владимир Красночуб

### Дата: 20/07/2025

### Функциональные требования

|**№**|**Действующие лица или системы**|**Use Case**|**Описание**|
| :-: | :- | :- | :- |
|1|Менеджер фермы|Просмотр видео в приложении|Получает лайв-фид из камер через приложения|
|2|Менеджер фермы|Получение оповещений|На основе ии-аналитики система посылает оповещения|
|3|Менеджер фермы|Менеджмент поилок-кормилок|Составление расписания, просмотр состояния|
|4|Сервис поилок/кормилок|Пересылание данных, получение команд|Посылает данные о состоянии еды и воды. Получает команды с расписаниями|
|5|Сервис камер|Пересылание видеофида|Посылает видео на дальнейшую обработку|
|6|Сервис аналитики камер|Анализ и дальнейшее пересылание видеофида|ИИ-анализ видео, посылание его в API для дисплея|
|7|Сервис аналитики камер|Коррекция модели|Внесение изменений в ИИ-модели в зависимости от встречаемых проблем|
|8|API|API сервис|Предоставление данных и методов для приложений, эндпоинт для видео|
|9|API|Данные|Компиляция готовых данных для Kafka остального AgTech|
|10|API|Кормилки и поилки|Посылает сигналы поилкам и кормилкам на отдельных фермах|
|11|User Service|Менеджмент юзеров|Юзеры, роли, пермишены|

### Нефункциональные требования

|**№**|**Требование**|
| :-: | :- |
|1|По возможности, стоит использовать знакомые команде технологии для скорости разработки|
|2|Задержка видео и оповещений (на основе аналитики) не должна быть слишком большой|

### Решение

[Диаграмма](./C2.md)

В соответствии с [начальной идеей Soltuion 2](./../../Task1/Solution1/C1.md), на одной ферме сосредоточено минимум инфраструктуры - присутствует только сервис камер, который стримит видео в Camera Analytics Service, и сервис, следящий за состоянием корма и воды.
Camera Analytics Service центральный, и может обслуживать несколько ферм. Предположительно, он должен быть довольно мощным.
Вся инфраструктура для Web и Mobile приложений хостится в центральной точке и переиспользуется между несколькими фермами. Это позволяет ее легко обновлять и менеджить.
Данные для аналитики посылаются в уже существующую Kafka AgTech.

### Альтернативы

Альтернативы, помимо [Solution 2](./../Solution2/ADR.md), могут зависить от тонкостей камер, поилок (разные производители и поддерживаемые протоколы), особенностей ферм, и не представляются анализируемыми.

#### Недостатки, ограничения, риски

Ключевой недостаток данного подхода - бутылочное горлышко связи между фермой и Livestock Management System. Из-за возможной удаленности и плохой связи между фермой (и находящимся там фермером) и остальной системой, вполне вероятны повышенные задержки и помехи в отсылаемых из фермы данных.
