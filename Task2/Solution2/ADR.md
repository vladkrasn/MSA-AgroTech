# Solution 2

## Автор: Владимир Красночуб

### Дата: 20/07/2025

### Функциональные требования

|**№**|**Действующие лица или системы**|**Use Case**|**Описание**|
| :-: | :- | :- | :- |
|1|Команда фермы|Просмотр видео в приложении|Получает лайв-фид из камер через приложения|
|2|Команда фермы|Получение оповещений|На основе ии-аналитики система посылает оповещения|
|3|Команда фермы|Менеджмент поилок-кормилок|Составление расписания, просмотр состояния|
|3|Команда фермы|AI adjustment|Редактирование локальной ИИ-модели для компенсации потенциальных ошибок которые она делает при аналитике|
|4|Сервис поилок/кормилок|Пересылание данных, получение команд|Посылает данные о состоянии еды и воды. Получает команды с расписаниями|
|5|Сервис камер|Пересылание видеофида|Посылает видео на дальнейшую обработку|
|6|Сервис камер|Анализ и дальнейшее пересылание видеофида|ИИ-анализ видео, посылание его в API для дисплея|
|7|Сервис камер|Коррекция модели|Внесение изменений в ИИ-модели в зависимости от встречаемых проблем|
|8|API|API сервис|Предоставление данных и методов для приложений, эндпоинт для видео|
|9|API|Кормилки и поилки|Посылает сигналы поилкам и кормилкам на отдельных фермах|
|10|Analytics Service|Данные|Компиляция готовых данных для Kafka остального AgTech|
|11|User Service|Менеджмент юзеров|Юзеры, роли, пермишены|

### Нефункциональные требования

|**№**|**Требование**|
| :-: | :- |
|1|По возможности, стоит использовать знакомые команде технологии для скорости разработки|
|2|Задержка видео и оповещений (на основе аналитики) не должна быть слишком большой|

### Решение

[Диаграмма](./C2.md)

В соответствии с [начальной идеей Soltuion 2](./../../Task1/Solution2/C1.md), на одной ферме сосредоточено как можно больше функционала. API, приложения хостятся на ферме. Сервис камер локально анализирует данные, и видеофид не выходит за пределы фермы.
Единственные сервисы, распологающиеся в центральной ноде:

* Analytics Service - поскольку аналитика может быть compound с нескорльких ферм, лучше она будет собираться в одном месте
* User Service - Центральный менеджмент пользователей более удобен.

Задержка видео низкая, а техническая инфраструктура фермы может автономно работать в условиях отсутствия связи с внешним миром.

### Альтернативы

Альтернативы, помимо [Solution 1](./../Solution1/ADR.md), могут зависить от тонкостей камер, поилок (разные производители и поддерживаемые протоколы), особенностей ферм, и не представляются анализируемыми.
User Service мог бы находиться в ферме, но это маленький сервис который для простоты можно иметь в центре.

#### Недостатки, ограничения, риски

Высокие требования к технической базе локально на ферме. Большая нужда в технических специалистах локально на ферме, а не просто где-то в центральном офисе.
